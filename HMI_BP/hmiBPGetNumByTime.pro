dir = '/data1/moucz/HMI_Coronal_BP/Data/2010.12.31_2011.01.03_full/'
files = '*.fits'
arrFile = file_search(dir+files)
;===============行号对应case的编号=========================================
;time = ['20101231_2049','20110101_0849','20110102_0010']
;time = ['20101231_2349','20110101_1149','20110101_2350']
;time = ['20110101_0249','20110101_1449','20110102_1850']
;time = ['20110101_0820','20110101_2020','20110102_1640']
;time = ['20110102_1010','20110102_2210','20110103_2359']
;time = ['20110101_0249','20110101_1449','20110102_0710']
;time = ['20110101_0540','20110101_1740','20110102_1230'] 
;time = ['20110101_1920','20110102_0720','20110103_0540'] 
;time = ['20101231_1449','20110101_0249','20110101_1730']
;time = ['20110101_0430','20110101_1630','20110102_1130'] 
;time = ['20110101_0249','20110101_1449','20110102_2010'] 
;time = ['20110101_0810','20110101_2010','20110103_0810']
;time = ['20110102_0400','20110102_1600','20110103_0120'] 
;time = ['20110101_1920','20110102_0720','20110103_0910']
;time = ['20110102_0320','20110102_1520','20110103_0900']
;time = ['20110101_2320','20110102_1120','20110103_0350']
;time = ['20101231_1200','20101231_2219','20110101_2330']
;time = ['20101231_1409','20110101_0209','20110101_1019']
;time = ['20110102_0130','20110102_1330','20110103_0640']
;time = ['20110102_0620','20110102_1820','20110103_0730']
;time = ['20110102_0600','20110102_1800','20110103_1200'] 
;time = ['20101231_1549','20110101_0349','20110102_0050'] 
;time = ['20110101_0329','20110101_1529','20110102_0020'] 
;time = ['20110102_0630','20110102_1830','20110103_0400']
;time = ['20110101_1440','20110102_0240','20110102_1950']
;time = ['20110102_0820','20110102_2020','20110103_1700']
;time = ['20110102_1050','20110102_2250','20110103_0920']
;time = ['20110102_1450','20110103_0250','20110103_1530']
;time = ['20101231_1329','20110101_0129','20110101_2040']
;time = ['20101231_1949','20110101_0749','20110101_1429']
;time = ['20110101_0640','20110101_1840','20110103_0140']
;time = ['20110101_1020','20110101_2220','20110103_0620']
;time = ['20110101_0540','20110101_1740','20110102_1120']
;time = ['20101231_2139','20110101_0939','20110101_2150']
;time = ['20101231_1929','20110101_0729','20110103_0330']
;time = ['20110102_2230','20110103_1030','20110103_2359']
;time = ['20110101_2320','20110102_1120','20110103_1700']
;time = ['20110102_0600','20110102_1800','20110103_0720']
;time = ['20101231_1659','20110101_0459','20110101_1710']
;time = ['20110101_1300','20110102_0100','20110102_1940']
;time = ['20101231_1209','20110101_0009','20110101_2320']
;time = ['20110102_0450','20110102_1650','20110103_0200']
;time = ['20110102_2000','20110103_0800','20110103_1250']
;time = ['20101231_2009','20110101_0809','20110101_1850']
;time = ['20101231_2049','20110101_0849','20110102_0150']
;time = ['20101231_1200','20101231_2049','20110101_2020']
;time = ['20101231_1359','20110101_0159','20110101_1740']
;time = ['20101231_1200','20101231_2319','20110102_1730']
;time = ['20110101_0259','20110101_1459','20110102_0140']
;time = ['20110101_2000','20110102_0800','20110102_1450']
;time = ['20110101_2010','20110102_0810','20110102_1400']
;time = ['20110102_0140','20110102_1340','20110102_1740']
;time = ['20110102_0010','20110102_1210','20110103_1450']
;time = ['20110102_0030','20110102_1230','20110103_0130']
;time = ['20110102_1740','20110103_0540','20110103_2040']
;time = ['20110102_0530','20110102_1730','20110103_1800']
;time = ['20110101_1100','20110101_2300','20110102_2330']
;time = ['20101231_2249','20110101_1049','20110101_1259']
;time = ['20101231_1200','20101231_2219','20110101_1209']
;time = ['20101231_2359','20110101_1159','20110101_1550']
;time = ['20101231_2229','20110101_1029','20110101_2320']
;time = ['20101231_1749','20110101_0549','20110102_1040']
;time = ['20110101_0530','20110101_1730','20110102_1410']
;time = ['20110101_1630','20110102_0430','20110103_0410']
;time = ['20110102_0600','20110102_1800','20110103_0530']
time = ['20110101_0920','20110101_2120','20110102_1420']







;=========================================================================

filename = 'hmiBPGetNumByTime.tmp'
file_delete,filename,/allow_nonexistent
arr = ['beginNum = ','refNum = ','endNum = ']
openw,lun,filename,/get_lun

for i=0,n_elements(time)-1 do begin
    ifile = Arr0(file_search(dir +'hmi.M_45s.'+ time[i] + '*_TAI.2.magnetogram.fits'))
    ;屏幕显示
    print,'============================================================================='
    file = file_basename(ifile[where(ifile eq arrFile)])
    print,file
    print,'============================================================================='
    num = where(ifile eq arrFile)
    print,'The number is ',num
    print,'============================================================================='
        
    ;写入文件
    ;获得时间信息
    GetFnamTime,file,'hmi.M_45s.',Year=year,Month=month,Day=day,Hour=hour,Minute=minute,Second=second
    printf,lun,arr[i] + IToA(num) + hmiBPBlankFormat(i,num) + ';' + $
           year+'-'+month+'-'+day+' '+hour+':'+minute+':'+second   
endfor

free_lun,lun
Over
END